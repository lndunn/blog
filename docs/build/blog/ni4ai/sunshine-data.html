
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>A brief walkthrough of the Sunshine uPMU dataset &#8212; NI4AI Blog 0.1 documentation</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/blank.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="shortcut icon" href="../../_static/tree.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Watch" href="../../workshops/index.html" />
    <link rel="prev" title="Expertise for Experts" href="expertise-for-experts.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    
      
      <link rel="icon" sizes="16x16" href="../../_static/_static/tree.png">
      
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../../index.html">
  <img src="../../_static/PingThings_logo_color.png" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../../quickstart/index.html">
  Quickstart
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../data/index.html">
  Data
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../index.html">
  Learn
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../workshops/index.html">
  Watch
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../tutorials/index.html">
  Code
 </a>
</li>

    
    <li class="nav-item">
        <a class="nav-link nav-external" href="https://btrdb.readthedocs.io/en/latest/">API Docs<i class="fas fa-external-link-alt"></i></a>
    </li>
    
    <li class="nav-item">
        <a class="nav-link nav-external" href="https://www.pingthings.io/">PingThings<i class="fas fa-external-link-alt"></i></a>
    </li>
    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/PingThingsIO/ni4ai-notebooks" rel="noopener" target="_blank" title="GitHub">
            <span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://www.pingthings.io/" rel="noopener" target="_blank" title="PingThings">
            <span><i class="fa"></i></span>
            <label class="sr-only">PingThings</label>
          </a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Access the PredictiveGrid
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference external" href="https://ni4ai.org">
   Register
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://plot.ni4ai.org">
   Plotter
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://jupyter.ni4ai.org">
   Jupyterhub
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://ni4ai.org/datasets">
   Data
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Learn More
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../index.html">
   Learn
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../platform/index.html">
     Platform
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
    <label for="toctree-checkbox-2">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../platform/plotter-demo.html">
       Plotter Demo
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../platform/api-demo.html">
       Demo: Connecting to the API
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../platform/btrdb-explained.html">
       BTrDB Explained
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../platform/btrdb-queries-pt1.html">
       Memory Efficient BTrDB Queries: Part 1
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../platform/btrdb-queries-pt2.html">
       Memory Efficient BTrDB Queries: Part 2
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../platform/benchmarking-results.html">
       PredictiveGrid Benchmarks
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../analysis/index.html">
     Analytics
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
    <label for="toctree-checkbox-3">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../analysis/quadrature-demodulation.html">
       Harmonic Phasor Estimation with Quadrature Demodulation
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../analysis/spectral-analysis.html">
       Spectral Analysis (part 1)
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../analysis/disaggregation.html">
       Solar Disaggregation
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../analysis/angle-differencing.html">
       Angle Differencing
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../analysis/tap-change.html">
       Counting tap changer operations
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../analysis/voltage-sags.html">
       Voltage Sag Safari
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../analysis/benchmarking-results.html">
       Benchmarking Results
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../analysis/symmetrical-components.html">
       Symmetrical Components
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../analysis/what-is-the-angle-1.html">
       What’s the Angle? (Part 1)
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../analysis/what-is-the-angle-2.html">
       What’s the Angle? (Part 2)
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../analysis/whats-in-a-phasor.html">
       What is a Phasor?
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../analysis/visualizing-phasor-timeseries.html">
       Visualizing Phasor Timeseries with matplotlib
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../analysis/power-factor.html">
       Power Factor Analysis
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../analysis/linear-models-overview.html">
       Training Linear Models
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../analysis/blue-cut-fire.html">
       Blue Cut Fire
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../analysis/btrdb-queries-pt1.html">
       Memory Efficient Queries (Part 1)
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../analysis/btrdb-queries-pt2.html">
       Memory Efficient Queries (Part 2)
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../commentary/index.html">
     Commentary
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
    <label for="toctree-checkbox-4">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../commentary/fire-season.html">
       Fire season is just around the corner
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../commentary/pmu-siting-2.html">
       Choosing where to site distribution PMUs
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../commentary/ekg-data.html">
       On EKG Data
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 current active has-children">
    <a class="reference internal" href="index.html">
     Get Involved in NI4AI
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
    <label for="toctree-checkbox-5">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="current">
     <li class="toctree-l3">
      <a class="reference internal" href="add-sensors.html">
       Stream Data to NI4AI
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="language-bindings-survey.html">
       Language Bindings
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="democratizing-data.html">
       Democratizing Grid Data
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="expertise-for-experts.html">
       Expertise for Experts
      </a>
     </li>
     <li class="toctree-l3 current active">
      <a class="current reference internal" href="#">
       A brief walkthrough of the Sunshine uPMU dataset
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../workshops/index.html">
   Watch
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../workshops/sascha.html">
     Understanding PMU Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../workshops/kevin.html">
     Use Cases and Applications for PMU Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../workshops/sean.html">
     The Power of Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../workshops/mohini.html">
     Voltage Sag Detection
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../workshops/miles.html">
     Exploring Frequency and Phase
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../tutorials/index.html">
   Code
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tutorials/quickstart.html">
     0 - PredictiveGrid in Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tutorials/collections.html">
     1 - Finding Collections &amp; Streams
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tutorials/streams.html">
     2 - Working with Streams
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tutorials/streamsets.html">
     3 - Working with StreamSets
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tutorials/plots.html">
     4 - Basic Plots
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tutorials/statpoints.html">
     5: Working with StatPoints
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tutorials/queries.html">
     6 - Memory Efficient Queries
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tutorials/metadata.html">
     7 - Working with Metadata
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tutorials/windows.html">
     8 - Windows, aligned windows, and values
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tutorials/plotaggregates.html">
     9 - Visualizing Aggregates
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tutorials/ingestion.html">
     10 - Data Ingestion
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://btrdb.readthedocs.io/en/latest/">
   API Docs
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  About Us
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference external" href="https://pingthings.io">
   PingThings
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://ni4ai.org/about">
   NI4AI
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://ni4ai.org/contact">
   Contact Us
  </a>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#let-s-explore-the-data">
   Let’s Explore the Data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#library-imports">
     Library Imports
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#establishing-a-connection">
     Establishing a Connection
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#viewing-the-collections">
     Viewing the Collections
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#choosing-streams">
     Choosing Streams
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#retrieving-stream-data">
     Retrieving Stream Data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#visualizing-the-data">
     Visualizing the Data
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#wrapping-it-up">
   Wrapping It Up
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="a-brief-walkthrough-of-the-sunshine-upmu-dataset">
<h1>A brief walkthrough of the Sunshine uPMU dataset<a class="headerlink" href="#a-brief-walkthrough-of-the-sunshine-upmu-dataset" title="Permalink to this headline">¶</a>
</h1>
<blockquote>
<div>
<p>Author: Sascha von Meier</p>
<p>March 30, 2020</p>
<p>This blog post provides a summary of the <code class="docutils literal notranslate"><span class="pre">sunshine</span></code> data collection, and sample code for querying the data.</p>
</div>
</blockquote>
<hr class="docutils">
<p>The “Sunshine” dataset comes from a distribution system in a sunny climate with significant solar PV generation. The data were collected with micro-PMUs during an early research deployment. There are gaps in the data which correspond to outages as the team was experimenting with different system configurations and wireless communications. When fully connected, each PMU reports data at 120 frames per second on twelve channels: three-phase voltage and current, giving root-mean-square magnitude and phase angle for each.</p>
<p>The six sensor locations correspond to three substation buses, one large PV array, and two university buildings. While all six are within the same city, there are three separate distribution circuits, equipped with two sensors each:</p>
<div class="highlight-default notranslate">
<div class="highlight"><pre><span></span><span class="n">PMU1</span> <span class="o">-</span> <span class="n">PV</span> <span class="n">array</span>
<span class="n">PMU3</span> <span class="o">-</span> <span class="n">Substation</span> <span class="n">where</span> <span class="n">this</span> <span class="n">PV</span> <span class="n">array</span> <span class="ow">is</span> <span class="n">connected</span>
</pre></div>
</div>
<div class="highlight-default notranslate">
<div class="highlight"><pre><span></span><span class="n">PMU6</span> <span class="o">-</span> <span class="n">Building</span>
<span class="n">PMU4</span> <span class="o">-</span> <span class="n">Substation</span> <span class="n">where</span> <span class="n">this</span> <span class="n">building</span> <span class="ow">is</span> <span class="n">connected</span>
<span class="n">The</span> <span class="n">impedance</span> <span class="n">between</span> <span class="n">PMUs</span> <span class="mi">4</span> <span class="ow">and</span> <span class="mi">6</span> <span class="ow">is</span> <span class="n">estimated</span> <span class="n">at</span>
<span class="n">Pos</span> <span class="n">seq</span> <span class="mf">0.76</span> <span class="o">+</span> <span class="n">j0</span><span class="mf">.463</span>
<span class="n">Neg</span> <span class="n">seq</span> <span class="mf">1.782</span> <span class="o">+</span> <span class="n">j1</span><span class="mf">.234</span>
</pre></div>
</div>
<div class="highlight-default notranslate">
<div class="highlight"><pre><span></span><span class="n">PMU2</span> <span class="o">-</span> <span class="n">Building</span>
<span class="n">PMU5</span> <span class="o">-</span> <span class="n">Substation</span> <span class="n">where</span> <span class="n">this</span> <span class="n">building</span> <span class="ow">is</span> <span class="n">connected</span>
<span class="n">The</span> <span class="n">impedance</span> <span class="n">between</span> <span class="n">PMUs</span> <span class="mi">2</span> <span class="ow">and</span> <span class="mi">5</span> <span class="ow">is</span> <span class="n">estimated</span> <span class="n">at</span>
<span class="n">Pos</span> <span class="n">seq</span> <span class="mf">0.489</span> <span class="o">+</span> <span class="n">j0</span><span class="mf">.59</span>
<span class="n">Neg</span> <span class="n">seq</span> <span class="mf">0.971</span> <span class="o">+</span> <span class="n">j1</span><span class="mf">.476</span>
</pre></div>
</div>
<p>The dataset was collected for academic power engineering research and has been anonymized to remove sensitive and location-specific information and it can be found in the <code class="docutils literal notranslate"><span class="pre">sunshine/</span></code> collection in the plotter.</p>
<p>In this post, we’ll go over how to access the dataset using the <a class="reference external" href="https://btrdb.readthedocs.io/en/latest/">btrdb-python bindings</a> and prepare to do power engineering analytics on it.</p>
<section id="let-s-explore-the-data">
<h2>Let’s Explore the Data<a class="headerlink" href="#let-s-explore-the-data" title="Permalink to this headline">¶</a>
</h2>
<p>Each uPMU’s streams are stored in a PMU-specific collection, <code class="docutils literal notranslate"><span class="pre">sunshine/PMU1</span></code> through <code class="docutils literal notranslate"><span class="pre">sunshine/PMU6</span></code>. The best way to explore the data is to go to the <a class="reference external" href="https://plot.ni4ai.org/">plotter</a> and enter <code class="docutils literal notranslate"><span class="pre">sunshine</span></code> into the “collection” filter. Each PMU is comprised of 13 related streams: the three phase voltage and current angle and magnitudes and a state stream. For example, here are the <a class="reference external" href="https://plot.ni4ai.org/permalink/PnpvDZpOl">3 voltage magnitude streams for sunhine/PMU3</a>.</p>
<p>The stream names look like “L1MAG” or “C3ANG”. Here L refers to voltage and C to current, 1-3 refers to the phase, and MAG/ANG refers to if this is a magnitude or an angle stream. Units are either volts or amps for magnitudes or deg for “degrees” for angles. Each uPMU also has an LSTATE stream whose unit is “mask” that describes the state of the PMU over time. After you get started visually exploring the streams in the plotter, we can begin to access the data via Python and the btrdb-python bindings.</p>
<section id="library-imports">
<h3>Library Imports<a class="headerlink" href="#library-imports" title="Permalink to this headline">¶</a>
</h3>
<p>To begin with, let’s import all of the libraries we may want to use.</p>
<div class="highlight-python notranslate">
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">btrdb</span> <span class="kn">import</span> <span class="n">connect</span>
<span class="kn">from</span> <span class="nn">btrdb.utils.timez</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">tabulate</span> <span class="kn">import</span> <span class="n">tabulate</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">connect</span></code> function will be used to create a handle to our database and the <code class="docutils literal notranslate"><span class="pre">btrdb.utils.timez</span></code> module contains a lot of useful convenience functions for working with datetimes in various formats.</p>
<p>We also import the <code class="docutils literal notranslate"><span class="pre">tabulate</span></code> function which we will use to create nicely formatted reports as well as the pandas library so we can turn the data into a <code class="docutils literal notranslate"><span class="pre">pandas.Series</span></code> object. Note that neither pandas nor tabulate are part of the Python standard library and will need to be installed with <code class="docutils literal notranslate"><span class="pre">pip</span></code> or <code class="docutils literal notranslate"><span class="pre">conda</span></code> to use them.</p>
</section>
<section id="establishing-a-connection">
<h3>Establishing a Connection<a class="headerlink" href="#establishing-a-connection" title="Permalink to this headline">¶</a>
</h3>
<p>As usual when working with BTrDB, we will use the connect function to create a handle to our database.  The <code class="docutils literal notranslate"><span class="pre">info()</span></code> method can be called to verify you are able to communicate with the database.</p>
<div class="highlight-python notranslate">
<div class="highlight"><pre><span></span><span class="n">db</span> <span class="o">=</span> <span class="n">connect</span><span class="p">(</span><span class="s2">"api.ni4ai.org:4411"</span><span class="p">,</span> <span class="n">apikey</span><span class="o">=</span><span class="s2">"XXXXXXXXXXXXXXXXXXXXXX"</span><span class="p">)</span>
<span class="n">db</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default notranslate">
<div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">'majorVersion'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">'build'</span><span class="p">:</span> <span class="s1">'5.7.2'</span><span class="p">,</span> <span class="s1">'proxy'</span><span class="p">:</span> <span class="p">{</span><span class="s1">'proxyEndpoints'</span><span class="p">:</span> <span class="p">[]}}</span>
</pre></div>
</div>
</section>
<section id="viewing-the-collections">
<h3>Viewing the Collections<a class="headerlink" href="#viewing-the-collections" title="Permalink to this headline">¶</a>
</h3>
<p>Data streams are organized into a hierarchichal tree of collections, so let’s view the collections available for the Sunshine dataset using the <code class="docutils literal notranslate"><span class="pre">list_collections</span></code> method.</p>
<div class="highlight-python notranslate">
<div class="highlight"><pre><span></span><span class="n">db</span><span class="o">.</span><span class="n">list_collections</span><span class="p">(</span><span class="s2">"sunshine"</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate">
<div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">'sunshine/PMU1'</span><span class="p">,</span> <span class="s1">'sunshine/PMU2'</span><span class="p">,</span> <span class="s1">'sunshine/PMU3'</span><span class="p">,</span> <span class="s1">'sunshine/PMU4'</span><span class="p">,</span> <span class="s1">'sunshine/PMU5'</span><span class="p">,</span> <span class="s1">'sunshine/PMU6'</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="choosing-streams">
<h3>Choosing Streams<a class="headerlink" href="#choosing-streams" title="Permalink to this headline">¶</a>
</h3>
<p>Now let’s assume we want to view the data in the <code class="docutils literal notranslate"><span class="pre">sunshine/PMU3</span></code> collection.  We can use the <code class="docutils literal notranslate"><span class="pre">streams_in_collection()</span></code> method to return all of the available streams (or we can use arguments to the method to return only specific streams).</p>
<div class="highlight-python notranslate">
<div class="highlight"><pre><span></span><span class="n">streams</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">streams_in_collection</span><span class="p">(</span><span class="s1">'sunshine/PMU3'</span><span class="p">)</span>
<span class="n">streams</span>
</pre></div>
</div>
<div class="highlight-default notranslate">
<div class="highlight"><pre><span></span><span class="p">[</span><span class="o">&lt;</span><span class="n">Stream</span> <span class="n">collection</span><span class="o">=</span><span class="n">sunshine</span><span class="o">/</span><span class="n">PMU3</span> <span class="n">name</span><span class="o">=</span><span class="n">C2ANG</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Stream</span> <span class="n">collection</span><span class="o">=</span><span class="n">sunshine</span><span class="o">/</span><span class="n">PMU3</span> <span class="n">name</span><span class="o">=</span><span class="n">C3MAG</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Stream</span> <span class="n">collection</span><span class="o">=</span><span class="n">sunshine</span><span class="o">/</span><span class="n">PMU3</span> <span class="n">name</span><span class="o">=</span><span class="n">L1ANG</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Stream</span> <span class="n">collection</span><span class="o">=</span><span class="n">sunshine</span><span class="o">/</span><span class="n">PMU3</span> <span class="n">name</span><span class="o">=</span><span class="n">C2MAG</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Stream</span> <span class="n">collection</span><span class="o">=</span><span class="n">sunshine</span><span class="o">/</span><span class="n">PMU3</span> <span class="n">name</span><span class="o">=</span><span class="n">C1ANG</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Stream</span> <span class="n">collection</span><span class="o">=</span><span class="n">sunshine</span><span class="o">/</span><span class="n">PMU3</span> <span class="n">name</span><span class="o">=</span><span class="n">L2ANG</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Stream</span> <span class="n">collection</span><span class="o">=</span><span class="n">sunshine</span><span class="o">/</span><span class="n">PMU3</span> <span class="n">name</span><span class="o">=</span><span class="n">L1MAG</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Stream</span> <span class="n">collection</span><span class="o">=</span><span class="n">sunshine</span><span class="o">/</span><span class="n">PMU3</span> <span class="n">name</span><span class="o">=</span><span class="n">C3ANG</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Stream</span> <span class="n">collection</span><span class="o">=</span><span class="n">sunshine</span><span class="o">/</span><span class="n">PMU3</span> <span class="n">name</span><span class="o">=</span><span class="n">C1MAG</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Stream</span> <span class="n">collection</span><span class="o">=</span><span class="n">sunshine</span><span class="o">/</span><span class="n">PMU3</span> <span class="n">name</span><span class="o">=</span><span class="n">L3ANG</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Stream</span> <span class="n">collection</span><span class="o">=</span><span class="n">sunshine</span><span class="o">/</span><span class="n">PMU3</span> <span class="n">name</span><span class="o">=</span><span class="n">L2MAG</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Stream</span> <span class="n">collection</span><span class="o">=</span><span class="n">sunshine</span><span class="o">/</span><span class="n">PMU3</span> <span class="n">name</span><span class="o">=</span><span class="n">L3MAG</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Stream</span> <span class="n">collection</span><span class="o">=</span><span class="n">sunshine</span><span class="o">/</span><span class="n">PMU3</span> <span class="n">name</span><span class="o">=</span><span class="n">LSTATE</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p>This provides a nice array of <a class="reference external" href="https://btrdb.readthedocs.io/en/latest/api/streams.html">Stream</a> objects.  Just for display purposes, let’s use the <code class="docutils literal notranslate"><span class="pre">tabulate</span></code> function to view formatted details about each stream.</p>
<div class="highlight-python notranslate">
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">describe_streams</span><span class="p">(</span><span class="n">streams</span><span class="p">):</span>
    <span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">"Index"</span><span class="p">,</span> <span class="s2">"Collection"</span><span class="p">,</span> <span class="s2">"Name"</span><span class="p">,</span> <span class="s2">"Units"</span><span class="p">,</span> <span class="s2">"UUID"</span><span class="p">]]</span>
    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">stream</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">streams</span><span class="p">):</span>
        <span class="n">tags</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">tags</span><span class="p">()</span>
        <span class="n">table</span><span class="o">.</span><span class="n">append</span><span class="p">([</span>
            <span class="n">idx</span><span class="p">,</span> <span class="n">stream</span><span class="o">.</span><span class="n">collection</span><span class="p">,</span> <span class="n">stream</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">tags</span><span class="p">[</span><span class="s2">"unit"</span><span class="p">],</span> <span class="n">stream</span><span class="o">.</span><span class="n">uuid</span>
        <span class="p">])</span>
    <span class="k">return</span> <span class="n">tabulate</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="s2">"firstrow"</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">describe_streams</span><span class="p">(</span><span class="n">streams</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate">
<div class="highlight"><pre><span></span>  <span class="n">Index</span>  <span class="n">Collection</span>     <span class="n">Name</span>    <span class="n">Units</span>    <span class="n">UUID</span>
<span class="o">-------</span>  <span class="o">-------------</span>  <span class="o">------</span>  <span class="o">-------</span>  <span class="o">------------------------------------</span>
      <span class="mi">0</span>  <span class="n">sunshine</span><span class="o">/</span><span class="n">PMU3</span>  <span class="n">C2ANG</span>   <span class="n">deg</span>      <span class="n">c71f34d1</span><span class="o">-</span><span class="mi">3</span><span class="n">cba</span><span class="o">-</span><span class="mi">4959</span><span class="o">-</span><span class="n">b4b9</span><span class="o">-</span><span class="mi">032</span><span class="n">ec078c66d</span>
      <span class="mi">1</span>  <span class="n">sunshine</span><span class="o">/</span><span class="n">PMU3</span>  <span class="n">C3MAG</span>   <span class="n">amps</span>     <span class="n">cd6d2be2</span><span class="o">-</span><span class="mi">6</span><span class="n">b7b</span><span class="o">-</span><span class="mi">4</span><span class="n">c46</span><span class="o">-</span><span class="n">be1e</span><span class="o">-</span><span class="mi">8432990</span><span class="n">ef23c</span>
      <span class="mi">2</span>  <span class="n">sunshine</span><span class="o">/</span><span class="n">PMU3</span>  <span class="n">L1ANG</span>   <span class="n">deg</span>      <span class="n">bc73226c</span><span class="o">-</span><span class="n">c877</span><span class="o">-</span><span class="mi">438</span><span class="n">a</span><span class="o">-</span><span class="n">ab37</span><span class="o">-</span><span class="mi">7</span><span class="n">a6703cbfbce</span>
      <span class="mi">3</span>  <span class="n">sunshine</span><span class="o">/</span><span class="n">PMU3</span>  <span class="n">C2MAG</span>   <span class="n">amps</span>     <span class="mi">47</span><span class="n">da9f9a</span><span class="o">-</span><span class="n">f8d9</span><span class="o">-</span><span class="mi">4955</span><span class="o">-</span><span class="mf">9e87</span><span class="o">-</span><span class="mi">9</span><span class="n">c17dabde298</span>
      <span class="mi">4</span>  <span class="n">sunshine</span><span class="o">/</span><span class="n">PMU3</span>  <span class="n">C1ANG</span>   <span class="n">deg</span>      <span class="n">bc9d458c</span><span class="o">-</span><span class="mi">9</span><span class="n">b54</span><span class="o">-</span><span class="mi">4</span><span class="n">ad2</span><span class="o">-</span><span class="n">b837</span><span class="o">-</span><span class="mi">53170</span><span class="n">a4d7331</span>
      <span class="mi">5</span>  <span class="n">sunshine</span><span class="o">/</span><span class="n">PMU3</span>  <span class="n">L2ANG</span>   <span class="n">deg</span>      <span class="n">f4b400e1</span><span class="o">-</span><span class="mi">26</span><span class="n">f4</span><span class="o">-</span><span class="mi">4</span><span class="n">ca9</span><span class="o">-</span><span class="n">b301</span><span class="o">-</span><span class="n">c2fbb7d77e87</span>
      <span class="mi">6</span>  <span class="n">sunshine</span><span class="o">/</span><span class="n">PMU3</span>  <span class="n">L1MAG</span>   <span class="n">volts</span>    <span class="mi">0295</span><span class="n">f80f</span><span class="o">-</span><span class="mi">6776</span><span class="o">-</span><span class="mi">4384</span><span class="o">-</span><span class="n">b563</span><span class="o">-</span><span class="mi">4582</span><span class="n">f7256600</span>
      <span class="mi">7</span>  <span class="n">sunshine</span><span class="o">/</span><span class="n">PMU3</span>  <span class="n">C3ANG</span>   <span class="n">deg</span>      <span class="n">b3ca2159</span><span class="o">-</span><span class="mi">8</span><span class="n">fa7</span><span class="o">-</span><span class="mi">4341</span><span class="o">-</span><span class="mi">801</span><span class="n">d</span><span class="o">-</span><span class="n">d1228af675b7</span>
      <span class="mi">8</span>  <span class="n">sunshine</span><span class="o">/</span><span class="n">PMU3</span>  <span class="n">C1MAG</span>   <span class="n">amps</span>     <span class="mf">1e641</span><span class="n">edc</span><span class="o">-</span><span class="n">d95a</span><span class="o">-</span><span class="mi">494</span><span class="n">f</span><span class="o">-</span><span class="mi">99</span><span class="n">f3</span><span class="o">-</span><span class="n">cbb991ef05bf</span>
      <span class="mi">9</span>  <span class="n">sunshine</span><span class="o">/</span><span class="n">PMU3</span>  <span class="n">L3ANG</span>   <span class="n">deg</span>      <span class="n">fabd1511</span><span class="o">-</span><span class="n">f6f8</span><span class="o">-</span><span class="mi">4670</span><span class="o">-</span><span class="n">b336</span><span class="o">-</span><span class="mi">7</span><span class="n">fbfe412e4a2</span>
     <span class="mi">10</span>  <span class="n">sunshine</span><span class="o">/</span><span class="n">PMU3</span>  <span class="n">L2MAG</span>   <span class="n">volts</span>    <span class="mi">38</span><span class="n">d62795</span><span class="o">-</span><span class="mi">6341</span><span class="o">-</span><span class="mi">4069</span><span class="o">-</span><span class="mi">96</span><span class="n">d3</span><span class="o">-</span><span class="n">fe74bffcac67</span>
     <span class="mi">11</span>  <span class="n">sunshine</span><span class="o">/</span><span class="n">PMU3</span>  <span class="n">L3MAG</span>   <span class="n">volts</span>    <span class="mi">37539589</span><span class="o">-</span><span class="mi">88</span><span class="n">aa</span><span class="o">-</span><span class="mi">48</span><span class="n">b7</span><span class="o">-</span><span class="mi">8</span><span class="n">cb4</span><span class="o">-</span><span class="mi">1</span><span class="n">ea2f32c9e8d</span>
     <span class="mi">12</span>  <span class="n">sunshine</span><span class="o">/</span><span class="n">PMU3</span>  <span class="n">LSTATE</span>  <span class="n">mask</span>     <span class="n">b50e8372</span><span class="o">-</span><span class="mi">6</span><span class="n">a6e</span><span class="o">-</span><span class="mi">405</span><span class="n">a</span><span class="o">-</span><span class="n">a366</span><span class="o">-</span><span class="mi">832</span><span class="n">f4c9b98f0</span>
</pre></div>
</div>
</section>
<section id="retrieving-stream-data">
<h3>Retrieving Stream Data<a class="headerlink" href="#retrieving-stream-data" title="Permalink to this headline">¶</a>
</h3>
<p>Now let’s imagine we’d like to view some of the data in the <code class="docutils literal notranslate"><span class="pre">L1MAG</span></code> stream.  We can query for the the raw values using the Stream object’s <code class="docutils literal notranslate"><span class="pre">values()</span></code> method and send in the start and end times for the query.  BTrDB naturally works at nanosecond precision (one billionth of a second or 10<sup>-9</sup>) so it will always ask for times in <a class="reference external" href="https://en.wikipedia.org/wiki/Unix_time">epoch</a> nanoseconds.  However we don’t have to convert datetime objects to nanoseconds manually as the <code class="docutils literal notranslate"><span class="pre">timez</span></code> module has the <code class="docutils literal notranslate"><span class="pre">to_nanoseconds</span></code> function that we can use.</p>
<div class="highlight-python notranslate">
<div class="highlight"><pre><span></span><span class="n">start</span> <span class="o">=</span> <span class="n">to_nanoseconds</span><span class="p">(</span><span class="s1">'2015-08-15 3:42:00'</span><span class="p">)</span>
<span class="n">end</span> <span class="o">=</span> <span class="n">to_nanoseconds</span><span class="p">(</span><span class="s1">'2015-08-15 3:47:00'</span><span class="p">)</span>
</pre></div>
</div>
<p>Now let’s get the values from that Stream.</p>
<div class="highlight-python notranslate">
<div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">streams</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
<span class="n">data</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-default notranslate">
<div class="highlight"><pre><span></span><span class="p">[(</span><span class="n">RawPoint</span><span class="p">(</span><span class="mi">1439610120008333333</span><span class="p">,</span> <span class="mf">7301.33935546875</span><span class="p">),</span> <span class="mi">122091</span><span class="p">),</span> <span class="p">(</span><span class="n">RawPoint</span><span class="p">(</span><span class="mi">1439610120016666666</span><span class="p">,</span> <span class="mf">7301.66796875</span><span class="p">),</span> <span class="mi">122091</span><span class="p">)]</span>
</pre></div>
</div>
<p>We can see that this method returns a list of tuples.  Each tuple contains a <code class="docutils literal notranslate"><span class="pre">RawPoint</span></code> as well as the version number of the stream at this time.  As a reminder, the data in each BTrDB stream is versioned and by querying for data without specifying an explicit version we were given the latest version at this time.</p>
<p>Each <code class="docutils literal notranslate"><span class="pre">RawPoint</span></code> is similar to a Python namedtuple and so we can easily split out its two properties: <code class="docutils literal notranslate"><span class="pre">time</span></code> and <code class="docutils literal notranslate"><span class="pre">value</span></code>.  In the code below we will split out the points and discard the version data, then split each RawPoint into an array of times and an array of values.  Finally we will create a new pandas <code class="docutils literal notranslate"><span class="pre">Series</span></code> using these two arrays.</p>
<div class="highlight-python notranslate">
<div class="highlight"><pre><span></span><span class="n">points</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">data</span><span class="p">)</span>
<span class="n">times</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">points</span><span class="p">)</span>
<span class="n">series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">times</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate">
<div class="highlight"><pre><span></span><span class="mi">1439610120008333333</span>    <span class="mf">7301.339355</span>
<span class="mi">1439610120016666666</span>    <span class="mf">7301.667969</span>
<span class="mi">1439610120024999999</span>    <span class="mf">7302.258789</span>
<span class="mi">1439610120033333332</span>    <span class="mf">7302.352539</span>
<span class="mi">1439610120041666665</span>    <span class="mf">7302.297852</span>
                          <span class="o">...</span>
<span class="mi">1439610419966666628</span>    <span class="mf">7288.075195</span>
<span class="mi">1439610419974999961</span>    <span class="mf">7288.063965</span>
<span class="mi">1439610419983333294</span>    <span class="mf">7288.255859</span>
<span class="mi">1439610419991666627</span>    <span class="mf">7288.071777</span>
<span class="mi">1439610419999999960</span>    <span class="mf">7287.898438</span>
<span class="n">Length</span><span class="p">:</span> <span class="mi">36000</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="n">float64</span>
</pre></div>
</div>
</section>
<section id="visualizing-the-data">
<h3>Visualizing the Data<a class="headerlink" href="#visualizing-the-data" title="Permalink to this headline">¶</a>
</h3>
<p>Now that we’re in a pandas Series object, we can use our familiar <code class="docutils literal notranslate"><span class="pre">plot()</span></code> method to visualize the data.</p>
<div class="highlight-python notranslate">
<div class="highlight"><pre><span></span><span class="n">series</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="basic visualization" src="../../_images/sunshine-plot-1.png"></p>
<p>Of course, we can always pull in the <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> library to get more fine grained control over our visualization.</p>
<div class="highlight-python notranslate">
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib.dates</span> <span class="k">as</span> <span class="nn">mdates</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">mdates</span><span class="o">.</span><span class="n">DateFormatter</span><span class="p">(</span><span class="s1">'%H:%M:%S'</span><span class="p">))</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">index</span><span class="p">),</span> <span class="n">series</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"values"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">label</span><span class="o">=</span><span class="s2">"mean"</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s2">"m"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">"volts"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">"time"</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">"Sunshine PMU3 L1MAG Voltage"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="improved visualization" src="../../_images/sunshine-plot-2.png"></p>
</section>
</section>
<section id="wrapping-it-up">
<h2>Wrapping It Up<a class="headerlink" href="#wrapping-it-up" title="Permalink to this headline">¶</a>
</h2>
<p>We’ve seen how we can view collections, streams, and data but there is much more you can do with BTrDB and Python!  Check out our <a class="reference external" href="https://btrdb.readthedocs.io/en/latest/working.html">tutorials and walkthroughs</a> to see more. In upcoming posts we’ll discuss how to perform standard power engineering computations on these streams using Python and the bindings to query data directly from the platform.</p>
</section>
</section>



              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="expertise-for-experts.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Expertise for Experts</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../../workshops/index.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Watch</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2021, PingThings.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.3.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>